!function(){"use strict";var e="";const t=(e,t,r)=>{(e=>Array.from(e).some(e=>!e.validity.valid))(e)?(t.disabled=!0,t.classList.add(r.inactiveButtonClass)):(t.disabled=!1,t.classList.remove(r.inactiveButtonClass))},r=[{name:"Val Thorens",link:e+"418980fdb81d7ceb84cc.jpg"},{name:"Restaurant terrace",link:e+"da7ae2ac910426f62176.jpg"},{name:"An outdoor cafe",link:e+"b431bbb397d7a39486fd.jpg"},{name:"A very long bridge, over the forest...",link:e+"44b92084d1c40cb0a70b.jpg"},{name:"Tunnel with morning light",link:e+"ac218ab8ae2c025add31.jpg"},{name:"Mountain house",link:e+"f37cd48ce187723b17f6.jpg"}],o=document.querySelector(".modal_edit-profile"),n=document.querySelector(".profile__edit-btn"),c=o.querySelector(".modal__close-btn"),l=o.querySelector(".modal__form"),a=o.querySelector("#profile-name-input"),i=o.querySelector("#profile-description-input"),d=document.querySelector(".profile__name"),s=document.querySelector(".profile__description"),u=document.querySelector(".modal_post-profile"),m=document.querySelector(".profile__post-btn"),_=u.querySelector(".modal__close-btn"),p=u.querySelector(".modal__form"),v=u.querySelector("#image-link"),y=u.querySelector("#image-caption"),S=document.querySelector("#cards-template").content.querySelector(".cards-container"),f=document.querySelector(".cards"),q=document.querySelector("#preview-modal"),b=(q.querySelector(".modal__image-container"),q.querySelector(".modal__image")),k=q.querySelector(".modal__caption"),L=q.querySelector(".modal__preview-close-btn"),E=document.querySelectorAll(".modal");let g;function C(e){e.classList.add("modal_is-opened"),g=t=>{"Escape"!==t.key&&27!==t.keyCode||h(e)},document.addEventListener("keydown",g)}function h(e){e.classList.remove("modal_is-opened"),document.removeEventListener("keydown",g)}function x(e){const t=S.cloneNode(!0);t.querySelector(".cards__description").textContent=e.name;const r=t.querySelector(".cards__image");r.src=e.link,r.alt=e.name,r.addEventListener("click",()=>{k.textContent=e.name,b.src=e.link,b.alt=e.name,C(q)}),t.querySelector(".cards__delete-btn").addEventListener("click",function(){t.remove()});const o=t.querySelector(".cards__like-btn");return o.addEventListener("click",()=>{o.classList.toggle("cards__like-btn_active")}),t}var j;n.addEventListener("click",()=>{C(o),a.value=d.textContent,i.value=s.textContent}),c.addEventListener("click",()=>{h(o)}),m.addEventListener("click",()=>{C(u)}),_.addEventListener("click",()=>{h(u)}),L.addEventListener("click",()=>{h(q)}),E.forEach(e=>{e.addEventListener("mousedown",t=>{t.target.classList.contains("modal")&&h(e)})}),l.addEventListener("submit",function(e){e.preventDefault();const t=a.value,r=i.value;d.textContent=t,s.textContent=r,h(o)}),r.forEach(function(e){const t=x(e);f.append(t)}),p.addEventListener("submit",function(e){e.preventDefault();const t=v.value;!function(e){const t=x(e);f.prepend(t)}({name:y.value,link:t}),h(u),p.reset()}),j={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn-disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal-error"},document.querySelectorAll(j.formSelector).forEach(e=>{((e,r)=>{const o=e.querySelectorAll(r.inputSelector),n=e.querySelector(r.submitButtonSelector);t(o,n,r),o.forEach(c=>{c.addEventListener("input",function(){((e,t,r)=>{t.validity.valid?((e,t,r)=>{const o=e.querySelector(`#${t.id}-error`);o.classList.remove(r.errorClass),t.classList.remove(r.inputErrorClass),o.textContent=""})(e,t,r):((e,t,r,o)=>{const n=e.querySelector(`#${t.id}-error`);n.textContent=r,n.classList.add(o.errorClass),t.classList.add(o.inputErrorClass)})(e,t,t.validationMessage,r)})(e,c,r),t(o,n,r)})})})(e,j)})}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUN6Q1osUUFBU2lCLElBaEJNQyxFQUFDRCxFQUFhOUUsS0FDdEMsTUFBTUYsRUFBWWdGLEVBQVl0QyxpQkFBaUJ4QyxFQUFPMEUsZUFDaEQzRSxFQUFnQitFLEVBQVk1RCxjQUFjbEIsRUFBTzJFLHNCQUV2RDlFLEVBQWFDLEVBQVdDLEVBQWVDLEdBRXZDRixFQUFVK0QsUUFBU3pELElBQ2pCQSxFQUFhNEMsaUJBQWlCLFFBQVMsV0EvQmhCZ0MsRUFBQ0YsRUFBYTFFLEVBQWNKLEtBQ2hESSxFQUFhQyxTQUFTQyxNQVJOMkUsRUFBQ0gsRUFBYTFFLEVBQWNKLEtBQ2pELE1BQU1rRixFQUF1QkosRUFBWTVELGNBQWMsSUFBSWQsRUFBYStFLFlBQ3hFRCxFQUFxQnpFLFVBQVVHLE9BQU9aLEVBQU82RSxZQUM3Q3pFLEVBQWFLLFVBQVVHLE9BQU9aLEVBQU80RSxpQkFDckNNLEVBQXFCNUIsWUFBYyxJQU9qQzJCLENBQWVILEVBQWExRSxFQUFjSixHQWxCdkJvRixFQUFDTixFQUFhMUUsRUFBY2lGLEVBQWNyRixLQUMvRCxNQUFNa0YsRUFBdUJKLEVBQVk1RCxjQUFjLElBQUlkLEVBQWErRSxZQUN4RUQsRUFBcUI1QixZQUFjK0IsRUFDbkNILEVBQXFCekUsVUFBVUMsSUFBSVYsRUFBTzZFLFlBQzFDekUsRUFBYUssVUFBVUMsSUFBSVYsRUFBTzRFLGtCQVloQ1EsQ0FBZU4sRUFBYTFFLEVBQWNBLEVBQWFrRixrQkFBbUJ0RixJQThCeEVnRixDQUFtQkYsRUFBYTFFLEVBQWNKLEdBQzlDSCxFQUFhQyxFQUFXQyxFQUFlQyxFQUN6QyxNQU9BK0UsQ0FBa0JELEVBQWE5RSxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bi1kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbC1lcnJvclwiXG59XG5cbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbmV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBlcnJvck1lc3NhZ2VFbGVtZW5ldC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgZXJyb3JNZXNzYWdlRWxlbWVuZXQuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG4gIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xufTtcblxuY29uc3QgaGlkZUlucHV0RXJyb3IgPSAoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbmV0ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICBlcnJvck1lc3NhZ2VFbGVtZW5ldC5jbGFzc0xpc3QucmVtb3ZlKGNvbmZpZy5lcnJvckNsYXNzKTtcbiAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gIGVycm9yTWVzc2FnZUVsZW1lbmV0LnRleHRDb250ZW50ID0gXCJcIjtcbn07XG5cbmNvbnN0IGNoZWNrSW5wdXRWYWxpZGl0eSA9IChmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBjb25maWcpID0+IHtcbiAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICBzaG93SW5wdXRFcnJvcihmb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UsIGNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgfVxufTtcblxuY29uc3QgaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xuICByZXR1cm4gQXJyYXkuZnJvbShpbnB1dExpc3QpLnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICB9KTtcbn07XG5cbmNvbnN0IHRvZ2dsZUJ1dHRvbiA9IChpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZykgPT4ge1xuICBpZiAoaGFzSW52YWxpZElucHV0KGlucHV0TGlzdCkpIHtcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9IGVsc2Uge1xuICAgIGJ1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG59O1xuXG5jb25zdCBzZXRFdmVudExpc3RlbmVycyA9IChmb3JtRWxlbWVudCwgY29uZmlnKSA9PiB7XG4gIGNvbnN0IGlucHV0TGlzdCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmlucHV0U2VsZWN0b3IpO1xuICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuXG4gIHRvZ2dsZUJ1dHRvbihpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG5cbiAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICBjaGVja0lucHV0VmFsaWRpdHkoZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCwgY29uZmlnKTtcbiAgICAgIHRvZ2dsZUJ1dHRvbihpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XG4gICAgfSk7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCwgY29uZmlnKTtcbiAgfSk7XG59O1xuXG5cblxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IHNldHRpbmdzLCBlbmFibGVWYWxpZGF0aW9uIH0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuaW1wb3J0IHZhbFRob3JlbnNJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3ZhbC10aG9yZW5zLmpwZ1wiO1xuaW1wb3J0IHJlc3RhdXJhbnRUZXJyYWNlSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9yZXN0YXVyYW50LXRlcnJhY2UuanBnXCI7XG5pbXBvcnQgb3V0ZG9vckNhZmVJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL291dGRvb3ItY2FmZS5qcGdcIjtcbmltcG9ydCBsb25nQnJpZGdlSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9sb25nLWJyaWRnZS5qcGdcIjtcbmltcG9ydCB0dW5uZWxJbWFnZSBmcm9tIFwiLi4vaW1hZ2VzL3R1bm5lbC5qcGdcIjtcbmltcG9ydCBtb3VudGFpbkhvdXNlSW1hZ2UgZnJvbSBcIi4uL2ltYWdlcy9tb3VudGFpbi1ob3VzZS5qcGdcIjtcblxuY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJWYWwgVGhvcmVuc1wiLFxuICAgIGxpbms6IHZhbFRob3JlbnNJbWFnZVxuICB9LFxuICB7XG4gICAgbmFtZTogXCJSZXN0YXVyYW50IHRlcnJhY2VcIixcbiAgICBsaW5rOiByZXN0YXVyYW50VGVycmFjZUltYWdlXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IG91dGRvb3JDYWZlSW1hZ2VcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQSB2ZXJ5IGxvbmcgYnJpZGdlLCBvdmVyIHRoZSBmb3Jlc3QuLi5cIixcbiAgICBsaW5rOiBsb25nQnJpZGdlSW1hZ2VcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVHVubmVsIHdpdGggbW9ybmluZyBsaWdodFwiLFxuICAgIGxpbms6IHR1bm5lbEltYWdlXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vdW50YWluIGhvdXNlXCIsXG4gICAgbGluazogbW91bnRhaW5Ib3VzZUltYWdlXG4gIH1cbl07XG5cbmNvbnN0IG1vZGFsRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX2VkaXQtcHJvZmlsZVwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0blwiKTtcbmNvbnN0IG1vZGFsRWRpdENsb3NlQnV0dG9uID0gbW9kYWxFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG5jb25zdCBlZGl0UHJvZmlsZUZvcm1FbGVtZW50ID0gbW9kYWxFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuY29uc3QgbW9kYWxFZGl0UHJvZmlsZU5hbWVJbnB1dCA9IG1vZGFsRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLW5hbWUtaW5wdXRcIik7XG5jb25zdCBtb2RhbEVkaXRQcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IG1vZGFsRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWRlc2NyaXB0aW9uLWlucHV0XCIpO1xuXG5jb25zdCBwcm9maWxlTmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX25hbWVcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcblxuY29uc3QgbW9kYWxQb3N0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfcG9zdC1wcm9maWxlXCIpO1xuY29uc3QgbmV3UG9zdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fcG9zdC1idG5cIik7XG5jb25zdCBtb2RhbFBvc3RDbG9zZUJ1dHRvbiA9IG1vZGFsUG9zdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnRuXCIpO1xuY29uc3QgcG9zdFByb2ZpbGVGb3JtRWxlbWVudCA9IG1vZGFsUG9zdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbmNvbnN0IG1vZGFsUG9zdFByb2ZpbGVMaW5rSW5wdXQgPSBtb2RhbFBvc3RQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtbGlua1wiKTtcbmNvbnN0IG1vZGFsUG9zdFByb2ZpbGVDYXB0aW9uSW5wdXQgPSBtb2RhbFBvc3RQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjaW1hZ2UtY2FwdGlvblwiKTtcblxuY29uc3QgY2FyZHNUZW1wbGF0ZSA9IGRvY3VtZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRzLXRlbXBsYXRlXCIpXG4gIC5jb250ZW50XG4gIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzLWNvbnRhaW5lclwiKTtcbmNvbnN0IGNhcmRzU2VjdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIik7XG5cbmNvbnN0IG1vZGFsUHJldmlld0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNwcmV2aWV3LW1vZGFsXCIpO1xuY29uc3QgbW9kYWxJbWFnZUNvbnRhaW5lciA9IG1vZGFsUHJldmlld0ltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLWNvbnRhaW5lclwiKTtcbmNvbnN0IG1vZGFsSW1hZ2VFbGVtZW50ID0gbW9kYWxQcmV2aWV3SW1hZ2UucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG5jb25zdCBtb2RhbEltYWdlQ2FwdGlvbiA9IG1vZGFsUHJldmlld0ltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG5jb25zdCBtb2RhbFByZXZpZXdDbG9zZUJ1dHRvbiA9IG1vZGFsUHJldmlld0ltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctY2xvc2UtYnRuXCIpO1xuXG5jb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xubGV0IGVzY2FwZUhhbmRsZXI7XG5cblxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG5cbiAgZXNjYXBlSGFuZGxlciA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScgfHwgZXZ0LmtleUNvZGUgPT09IDI3KSB7XG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcbiAgICB9XG4gIH07XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVzY2FwZUhhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9pcy1vcGVuZWRcIik7XG5cbiAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGVzY2FwZUhhbmRsZXIpO1xufVxuXG5cbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChtb2RhbEVkaXRQcm9maWxlKTtcbiAgbW9kYWxFZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudDtcbiAgbW9kYWxFZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50LnRleHRDb250ZW50O1xufSk7XG5cblxubW9kYWxFZGl0Q2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChtb2RhbEVkaXRQcm9maWxlKTtcbn0pO1xuXG5uZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG9wZW5Nb2RhbChtb2RhbFBvc3RQcm9maWxlKTtcbn0pO1xuXG5tb2RhbFBvc3RDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKG1vZGFsUG9zdFByb2ZpbGUpO1xufSk7XG5cbm1vZGFsUHJldmlld0Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwobW9kYWxQcmV2aWV3SW1hZ2UpO1xufSk7XG5cbiBhbGxNb2RhbHMuZm9yRWFjaCgobW9kYWwpID0+IHtcbiAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbW9kYWwnKSkge1xuICAgICAgY2xvc2VNb2RhbChtb2RhbCk7XG4gICAgfVxuICB9KTtcbn0pO1xuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgY29uc3QgbW9kYWxFZGl0UHJvZmlsZU5hbWVJbnB1dFZhbHVlID0gbW9kYWxFZGl0UHJvZmlsZU5hbWVJbnB1dC52YWx1ZTtcbiAgY29uc3QgbW9kYWxFZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXRWYWx1ZSA9IG1vZGFsRWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlO1xuXG4gIHByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG1vZGFsRWRpdFByb2ZpbGVOYW1lSW5wdXRWYWx1ZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IG1vZGFsRWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0VmFsdWU7XG5cbiAgY2xvc2VNb2RhbChtb2RhbEVkaXRQcm9maWxlKTtcbn1cblxuZWRpdFByb2ZpbGVGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5cbmZ1bmN0aW9uIGdldENhcmRFbGVtZW50KGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkc1RlbXBsYXRlLmNsb25lTm9kZSh0cnVlKTtcblxuICBjb25zdCBjYXJkRGVzY3JpcHRpb25FTCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2Rlc2NyaXB0aW9uXCIpO1xuICBjYXJkRGVzY3JpcHRpb25FTC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcblxuICBjb25zdCBjYXJkSW1hZ2VFTCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2ltYWdlXCIpO1xuICBjYXJkSW1hZ2VFTC5zcmMgPSBkYXRhLmxpbms7XG4gIGNhcmRJbWFnZUVMLmFsdCA9IGRhdGEubmFtZTtcblxuICBjYXJkSW1hZ2VFTC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIG1vZGFsSW1hZ2VDYXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIG1vZGFsSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgICBtb2RhbEltYWdlRWxlbWVudC5hbHQgPSBkYXRhLm5hbWU7XG4gICAgb3Blbk1vZGFsKG1vZGFsUHJldmlld0ltYWdlKTtcbiAgfSk7XG5cbiAgY29uc3QgY2FyZERlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2RlbGV0ZS1idG5cIik7XG4gIGNhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uKCkge1xuICAgIGNhcmRFbGVtZW50LnJlbW92ZSgpO1xuICB9KTtcblxuICBjb25zdCBjYXJkTGlrZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2xpa2UtYnRuXCIpO1xuICBjYXJkTGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZS1idG5fYWN0aXZlXCIpO1xuICB9KTtcblxuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cblxuaW5pdGlhbENhcmRzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGdldENhcmRFbGVtZW50KGl0ZW0pO1xuICBjYXJkc1NlY3Rpb24uYXBwZW5kKGNhcmRFbGVtZW50KTtcbn0pO1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGRhdGEpIHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcbiAgY2FyZHNTZWN0aW9uLnByZXBlbmQoY2FyZEVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICBjb25zdCBtb2RhbFBvc3RQcm9maWxlTGlua0lucHV0VmFsdWUgPSBtb2RhbFBvc3RQcm9maWxlTGlua0lucHV0LnZhbHVlO1xuICBjb25zdCBtb2RhbFBvc3RQcm9maWxlQ2FwdGlvbklucHV0VmFsdWUgPSBtb2RhbFBvc3RQcm9maWxlQ2FwdGlvbklucHV0LnZhbHVlO1xuXG4gIHJlbmRlckNhcmQoe1xuICAgIG5hbWU6IG1vZGFsUG9zdFByb2ZpbGVDYXB0aW9uSW5wdXRWYWx1ZSxcbiAgICBsaW5rOiBtb2RhbFBvc3RQcm9maWxlTGlua0lucHV0VmFsdWVcbiAgfSk7XG5cbiAgY2xvc2VNb2RhbChtb2RhbFBvc3RQcm9maWxlKTtcblxuICBwb3N0UHJvZmlsZUZvcm1FbGVtZW50LnJlc2V0KCk7XG59XG5cbnBvc3RQcm9maWxlRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgaGFuZGxlQWRkQ2FyZFN1Ym1pdCk7XG5cbmVuYWJsZVZhbGlkYXRpb24oc2V0dGluZ3MpOyJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwidG9nZ2xlQnV0dG9uIiwiaW5wdXRMaXN0IiwiYnV0dG9uRWxlbWVudCIsImNvbmZpZyIsIkFycmF5IiwiZnJvbSIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlIiwiaW5pdGlhbENhcmRzIiwibmFtZSIsImxpbmsiLCJtb2RhbEVkaXRQcm9maWxlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJtb2RhbEVkaXRDbG9zZUJ1dHRvbiIsImVkaXRQcm9maWxlRm9ybUVsZW1lbnQiLCJtb2RhbEVkaXRQcm9maWxlTmFtZUlucHV0IiwibW9kYWxFZGl0UHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwcm9maWxlTmFtZUVsZW1lbnQiLCJwcm9maWxlRGVzY3JpcHRpb25FbGVtZW50IiwibW9kYWxQb3N0UHJvZmlsZSIsIm5ld1Bvc3RCdXR0b24iLCJtb2RhbFBvc3RDbG9zZUJ1dHRvbiIsInBvc3RQcm9maWxlRm9ybUVsZW1lbnQiLCJtb2RhbFBvc3RQcm9maWxlTGlua0lucHV0IiwibW9kYWxQb3N0UHJvZmlsZUNhcHRpb25JbnB1dCIsImNhcmRzVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZHNTZWN0aW9uIiwibW9kYWxQcmV2aWV3SW1hZ2UiLCJtb2RhbEltYWdlRWxlbWVudCIsIm1vZGFsSW1hZ2VDYXB0aW9uIiwibW9kYWxQcmV2aWV3Q2xvc2VCdXR0b24iLCJhbGxNb2RhbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZXNjYXBlSGFuZGxlciIsIm9wZW5Nb2RhbCIsIm1vZGFsIiwiZXZ0Iiwia2V5Iiwia2V5Q29kZSIsImNsb3NlTW9kYWwiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENhcmRFbGVtZW50IiwiZGF0YSIsImNhcmRFbGVtZW50IiwiY2xvbmVOb2RlIiwidGV4dENvbnRlbnQiLCJjYXJkSW1hZ2VFTCIsInNyYyIsImFsdCIsImNhcmRMaWtlQnV0dG9uIiwidG9nZ2xlIiwidmFsdWUiLCJmb3JFYWNoIiwidGFyZ2V0IiwiY29udGFpbnMiLCJwcmV2ZW50RGVmYXVsdCIsIm1vZGFsRWRpdFByb2ZpbGVOYW1lSW5wdXRWYWx1ZSIsIm1vZGFsRWRpdFByb2ZpbGVEZXNjcmlwdGlvbklucHV0VmFsdWUiLCJpdGVtIiwiYXBwZW5kIiwibW9kYWxQb3N0UHJvZmlsZUxpbmtJbnB1dFZhbHVlIiwicHJlcGVuZCIsInJlbmRlckNhcmQiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJmb3JtRWxlbWVudCIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaGlkZUlucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2VFbGVtZW5ldCIsImlkIiwic2hvd0lucHV0RXJyb3IiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=